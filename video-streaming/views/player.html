<!DOCTYPE html>
<html>
	<body onload="init()">
		<h1>SubTitle List</h1>
		<table id="VttTable" width="100%">
		</table>

		<video width="640" height="480" controls>
		  <source id="videoSource" src="<%= hostUrl%>/video/<%= videoId%>" type="video/mp4" />
		  <track id="vttSource" kind="subtitles" srclang="en" label="English" default/>
		  <!-- fallback for rubbish browsers -->
		</video>

	
		<script>
		function init() {
			var vtts = JSON.parse('<%- JSON.stringify(vtts) %>');
			var table = document.getElementById("VttTable");
			var i;
			for(i=0 ; i<Math.floor(vtts.length/4)*4; i+=4){
			    var row = table.insertRow(0);
			    var cell1 = row.insertCell(0);
			    var cell2 = row.insertCell(1);
			    var cell3 = row.insertCell(2);
			    var cell4 = row.insertCell(3);
			    cell1.innerHTML = vtts[i];
			    cell2.innerHTML = vtts[i+1];
			    cell3.innerHTML = vtts[i+2];
			    cell4.innerHTML = vtts[i+3];
			}
			var row = table.insertRow(0);
			for(i; i<vtts.length; i++){
			    var cell1 = row.insertCell(0);
			    cell1.innerHTML =vtts[i];
			    cell1.setAttribute('onclick', "insertSub('"+ vtts[i]+"')");
			}
		}
		function insertSub(subId){
			var vtt = document.getElementById("vttSource");
			console.log("inserted")
			vtt.src = '<%= hostUrl%>'+'/vtt/'+ subId;
		}
		</script>

	</body>
</html>

